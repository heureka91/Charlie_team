{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tibi91\\\\Desktop\\\\Charlie-Team-Forum-App2-main\\\\src\\\\components\\\\auth\\\\LoginForm.tsx\",\n  _s = $RefreshSig$();\n// src/LoginForm.tsx\nimport React, { useState, useEffect } from 'react';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { useNavigate } from 'react-router-dom';\nimport LoginFormView from './LoginFormView';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginForm = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      navigate('/forum');\n    }\n  }, [navigate]);\n  const validationSchema = Yup.object({\n    username: Yup.string().email('Érvénytelen email cím').required('Kötelező mező'),\n    password: Yup.string().min(8, 'A jelszónak legalább 8 karakter hosszúnak kell lennie').matches(/\\d/, 'A jelszónak tartalmaznia kell legalább egy számot').matches(/[a-z]/, 'A jelszónak tartalmaznia kell legalább egy kisbetűt').required('Kötelező mező')\n  });\n  const formik = useFormik({\n    initialValues: {\n      username: '',\n      password: ''\n    },\n    validationSchema,\n    onSubmit: async values => {\n      setError(null);\n      try {\n        const response = await fetch('http://localhost:5000/user/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(values)\n        });\n        if (response.ok) {\n          const data = await response.json();\n          localStorage.setItem('token', data.accessToken);\n          navigate('/forum');\n        } else {\n          const errorData = await response.json();\n          switch (response.status) {\n            case 400:\n              throw new Error(errorData.message || 'A bevitt adatok érvénytelenek.');\n            case 401:\n              throw new Error(errorData.message || 'Hibás felhasználónév vagy jelszó.');\n            default:\n              throw new Error(errorData.message || 'Ismeretlen hiba történt.');\n          }\n        }\n      } catch (err) {\n        if (err instanceof Error) {\n          setError(err.message);\n        } else {\n          setError('Ismeretlen hiba történt.');\n        }\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(LoginFormView, {\n    formik: formik,\n    error: error,\n    loading: formik.isSubmitting\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 12\n  }, this);\n};\n_s(LoginForm, \"YdIw9EP1IYtvuruWOPq3TM8D8Is=\", false, function () {\n  return [useNavigate, useFormik];\n});\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useState","useEffect","useFormik","Yup","useNavigate","LoginFormView","jsxDEV","_jsxDEV","LoginForm","_s","error","setError","navigate","token","localStorage","getItem","validationSchema","object","username","string","email","required","password","min","matches","formik","initialValues","onSubmit","values","response","fetch","method","headers","body","JSON","stringify","ok","data","json","setItem","accessToken","errorData","status","Error","message","err","loading","isSubmitting","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Tibi91/Desktop/Charlie-Team-Forum-App2-main/src/components/auth/LoginForm.tsx"],"sourcesContent":["// src/LoginForm.tsx\nimport React, { useState, useEffect } from 'react';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { useNavigate } from 'react-router-dom';\nimport LoginFormView from './LoginFormView';\n\ninterface FormValues {\n    username: string;\n    password: string;\n}\n\nconst LoginForm: React.FC = () => {\n    const [error, setError] = useState<string | null>(null);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            navigate('/forum');\n        }\n    }, [navigate]);\n\n    const validationSchema = Yup.object({\n        username: Yup.string().email('Érvénytelen email cím').required('Kötelező mező'),\n        password: Yup.string()\n            .min(8, 'A jelszónak legalább 8 karakter hosszúnak kell lennie')\n            .matches(/\\d/, 'A jelszónak tartalmaznia kell legalább egy számot')\n            .matches(/[a-z]/, 'A jelszónak tartalmaznia kell legalább egy kisbetűt')\n            .required('Kötelező mező'),\n    });\n\n    const formik = useFormik<FormValues>({\n        initialValues: {\n            username: '',\n            password: '',\n        },\n        validationSchema,\n        onSubmit: async (values) => {\n            setError(null);\n            try {\n                const response = await fetch('http://localhost:5000/user/login', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify(values),\n                });\n\n                if (response.ok) {\n                    const data = await response.json();\n                    localStorage.setItem('token', data.accessToken);\n                    navigate('/forum');\n                } else {\n                    const errorData = await response.json();\n                    switch (response.status) {\n                        case 400:\n                            throw new Error(errorData.message || 'A bevitt adatok érvénytelenek.');\n                        case 401:\n                            throw new Error(errorData.message || 'Hibás felhasználónév vagy jelszó.');\n                        default:\n                            throw new Error(errorData.message || 'Ismeretlen hiba történt.');\n                    }\n                }\n            } catch (err) {\n                if (err instanceof Error) {\n                    setError(err.message);\n                } else {\n                    setError('Ismeretlen hiba történt.');\n                }\n            }\n        },\n    });\n\n    return <LoginFormView formik={formik} error={error} loading={formik.isSubmitting} />;\n};\n\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}